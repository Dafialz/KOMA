<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>–í—ñ–¥–µ–æ—á–∞—Ç ‚Äî –ö–û–ú–ê</title>
  <link rel="icon" href="icon/favicon.ico">
  <link rel="stylesheet" href="css/main.css">

  <style>
    .wrap{max-width:1100px;margin:16px auto;padding:0 18px;display:grid;grid-template-columns:2fr 1fr;gap:16px}
    @media (max-width:900px){.wrap{grid-template-columns:1fr}}
    .card{border:1px solid var(--border);border-radius:var(--radius,16px);background:#fff;box-shadow:var(--shadow,0 10px 30px rgba(0,0,0,.08))}
    .card.side{padding:16px}

    .video{position:relative;display:grid;grid-template-columns:1fr;gap:8px;padding:16px;border-bottom:1px solid var(--border)}
    .video video{width:100%;background:#000;border-radius:12px;min-height:220px;object-fit:cover}
    .video #local{position:absolute;right:16px;bottom:16px;width:220px;max-width:35%;border:2px solid #fff;box-shadow:0 6px 18px rgba(0,0,0,.35);border-radius:12px}
    @media (max-width:700px){.video #local{width:150px}}

    .controls{padding:12px 16px;display:flex;flex-wrap:wrap;gap:10px;align-items:center}
    .controls .btn{height:38px;padding:0 14px}
    .btn-group{display:inline-flex;gap:0}
    .btn-group .btn{border-radius:999px}
    .btn-group .btn:not(:first-child){margin-left:-8px}
    .btn-group .btn:focus{position:relative;z-index:1}
    .btn-pill{border-radius:999px}
    .btn.ghost{border:1px dashed var(--border)}
    .btn.active{outline:2px solid rgba(15,82,87,.25)}
    .controls .meta{margin-left:auto;display:flex;gap:10px;align-items:center;color:var(--muted,#4b5563);font-size:.95rem;flex-wrap:wrap}
    .badge{display:inline-flex;align-items:center;gap:6px;line-height:1;border-radius:999px;background:#eef6f6;color:#0f5257;padding:6px 10px;font-size:.85rem}
    .badge.muted{background:#f3f4f6;color:#6b7280}
    .badge.ok{background:#e8f8ef;color:#0f7a48}
    .badge.danger{background:#fde8e8;color:#b91c1c}

    .chat{margin-top:10px}
    .chatlog{
      display:flex; flex-direction:column; gap:6px;
      height:260px; overflow:auto; border:1px solid var(--border);
      border-radius:12px; padding:10px; background:#fafafa;
    }
    .msg{display:flex}
    .msg.me{justify-content:flex-end}
    .msg.peer{justify-content:flex-start}
    .msg.sys{justify-content:center}
    .bubble{
      max-width:85%; padding:8px 10px; border-radius:12px;
      background:#eef6f6; color:#0f5257; box-shadow:0 1px 0 rgba(0,0,0,.03);
    }
    .me .bubble{background:#e8f8ef;color:#0f7a48}
    .sys{color:#6b7280;font-size:.9rem}
    .name{display:block; font-size:.75rem; opacity:.8; margin-bottom:4px}
    .row{display:flex;gap:8px;margin-top:10px}
    .row input{flex:1;border:1px solid var(--border);border-radius:10px;padding:10px}
    .row .btn{height:40px}

    button:disabled,.btn[aria-disabled="true"]{opacity:.6;cursor:not-allowed}

    /* –ö–Ω–æ–ø–∫–∞ –¥–ª—è —Ä–æ–∑–±–ª–æ–∫—É–≤–∞–Ω–Ω—è –∞—É–¥—ñ–æ –Ω–∞ –º–æ–±—ñ–ª—å–Ω–∏—Ö */
    .unmute {
      position:absolute; left:50%; bottom:18px; transform:translateX(-50%);
      background:#0f5257;color:#fff;border:none;border-radius:999px;padding:10px 14px;
      font-size:.9rem; box-shadow:0 6px 18px rgba(0,0,0,.25); display:none;
    }
    .video.has-unmute .unmute{display:block}
  </style>
</head>
<body>

  <div data-include="partials/header.html"></div>

  <div class="wrap">
    <section class="card">
      <div class="video" id="videoWrap">
        <video id="remote" autoplay playsinline></video>
        <video id="local"  autoplay playsinline muted></video>
        <button id="btnUnmute" class="unmute">–£–≤—ñ–º–∫–Ω—É—Ç–∏ –∑–≤—É–∫</button>
      </div>

      <div class="controls">
        <button id="btnStart" class="btn green btn-pill">üîå –ü—ñ–¥‚Äô—î–¥–Ω–∞—Ç–∏—Å—è</button>

        <div class="btn-group" role="group" aria-label="–ü—Ä–∏—Å—Ç—Ä–æ—ó">
          <button id="btnMic"    class="btn gray"    disabled>üéôÔ∏è –ú—ñ–∫—Ä–æ—Ñ–æ–Ω</button>
          <button id="btnCam"    class="btn gray"    disabled>üì∑ –ö–∞–º–µ—Ä–∞</button>
          <button id="btnScreen" class="btn outline" disabled>üñ•Ô∏è –ü–æ–¥—ñ–ª–∏—Ç–∏—Å—å –µ–∫—Ä–∞–Ω–æ–º</button>
        </div>

        <div class="btn-group" role="group" aria-label="–ï–∫—Ä–∞–Ω">
          <button id="btnFullRemote" class="btn ghost">‚§¢ –°–ø—ñ–≤—Ä–æ–∑–º–æ–≤–Ω–∏–∫</button>
          <button id="btnFullLocal"  class="btn ghost">‚§¢ –ú–æ—î –≤—ñ–¥–µ–æ</button>
        </div>

        <div class="meta">
          <span id="status" class="badge muted">–ù–µ –ø—ñ–¥‚Äô—î–¥–Ω–∞–Ω–æ</span>
          <span id="roomLabel" class="badge"></span>
          <span id="roleLabel" class="badge"></span>
        </div>
      </div>
    </section>

    <aside class="card side">
      <div style="display:flex;align-items:center;justify-content:space-between;gap:12px">
        <strong>–ß–∞—Ç</strong>
        <span class="badge muted" id="hint">–û—á—ñ–∫—É–≤–∞–Ω–Ω—è –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è‚Ä¶</span>
      </div>

      <div class="chat">
        <div id="chatlog" class="chatlog" role="log" aria-live="polite"></div>
        <div class="row">
          <input id="msg" placeholder="–ù–∞–ø–∏—Å–∞—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è‚Ä¶" disabled>
          <button id="send" class="btn outline" disabled>–ù–∞–¥—ñ—Å–ª–∞—Ç–∏</button>
        </div>
      </div>
    </aside>
  </div>

  <!-- WebRTC adapter -->
  <script src="https://webrtc.github.io/adapter/adapter-latest.js" defer></script>

  <!-- –†–æ–∑–±–∏—Ç—ñ –º–æ–¥—É–ª—ñ (–∑ –∫–µ—à-–±–∞—Å—Ç–∏–Ω–≥–æ–º) -->
  <script src="js/video-config.js?v=8" defer></script>
  <script src="js/video-webrtc.js?v=8" defer></script>
  <script src="js/video-ui.js?v=8" defer></script>

  <!-- Eruda (–º–æ–±—ñ–ª—å–Ω–∞ –∫–æ–Ω—Å–æ–ª—å): –º–æ–±—ñ–ª—å–Ω—ñ –∞–±–æ ?debug=1 -->
  <script>
    (function(){
      const isMobile = /Android|iPhone|iPad|iPod/i.test(navigator.userAgent);
      const wantDebug = isMobile || /(?:\?|&)debug(?:=1)?/i.test(location.search) || /on/i.test(localStorage.getItem('eruda'));
      if (!wantDebug) return;
      const s = document.createElement('script');
      s.src = 'https://cdn.jsdelivr.net/npm/eruda@3/eruda.min.js';
      s.onload = function(){
        eruda.init();
        try { eruda.position({ x: 12, y: 12 }); } catch {}
        console.log('[eruda] ready');
        localStorage.setItem('eruda', 'on');
      };
      document.body.appendChild(s);
    })();
  </script>

  <script src="js/partials.js?v=8" defer></script>
</body>
</html>
